<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Centered Hole Grid + Hologram</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
  :root { --hx: 50%; --hy: 50%; }

  html, body {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    overflow: hidden;
    background: #000;
  }

  /* HOLOGRAM BACKGROUND */
  .holo-bg {
    position: fixed;
    inset: -40%;
    z-index: 0;
    background:
      radial-gradient(circle at var(--hx) var(--hy),
        #00ffe0 0%, #00ff66 18%, #ffe600 32%,
        #ff00ff 50%, #0040ff 68%, #000 100%);
    filter: blur(30px);
    opacity: 0.95;
    mix-blend-mode: screen;
    pointer-events: none;
  }

  /* CANVAS FOR HOLES */
  #mask {
    position: fixed;
    inset: 0;
    z-index: 2;
    pointer-events: none;
  }

  /* BLACK BLOCK â€” SHORTER + HIGHER ON SCREEN */
  .center-block {
    position: fixed;
    left: 50%;
    top: 45%;
    transform: translate(-50%, -50%);
    background: #000;

    width: 90vw;
    height: 75vh;
    max-width: 600px;
    max-height: 1000px;

    border-radius: 6vw;
    z-index: 3;

    box-shadow:
      0 0 30px #000,
      0 0 80px #000;

    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* CLEAN TYPEWRITER TEXT */
  .title {
    font-family: "Courier New", Courier, monospace;
    white-space: pre-line;
    color: white;
    font-size: clamp(26px, 8vw, 48px);
    text-align: center;
    line-height: 1.1;
  }
</style>
</head>

<body>

<div class="holo-bg"></div>
<canvas id="mask"></canvas>

<div class="center-block">
  <div class="title">Hello<br>World</div>
</div>

<script>
/* ============================================================
   GRADIENT MOTION
============================================================ */

function setGradientByPercent(px, py) {
  document.documentElement.style.setProperty("--hx", px + "%");
  document.documentElement.style.setProperty("--hy", py + "%");
}

setGradientByPercent(50, 50);

let motionActive = false;

function trackPointer(x, y) {
  if (motionActive) return;
  setGradientByPercent((x / innerWidth) * 100, (y / innerHeight) * 100);
}

window.addEventListener("mousemove", e => trackPointer(e.clientX, e.clientY));
window.addEventListener("touchmove", e => {
  const t = e.touches[0];
  if (t) trackPointer(t.clientX, t.clientY);
}, { passive: true });

/* ACCELEROMETER */
let baseAx = 0, baseAy = 0;
let filteredDx = 0, filteredDy = 0;
let baselineSet = false;

function attachMotion() {
  window.addEventListener("devicemotion", e => {
    const acc = e.accelerationIncludingGravity;
    if (!acc) return;

    let ax = acc.x || 0;
    let ay = acc.y || 0;

    if (!baselineSet) {
      baselineSet = true;
      baseAx = ax;
      baseAy = ay;
      return;
    }

    filteredDx += (ax - baseAx - filteredDx) * 0.15;
    filteredDy += (ay - baseAy - filteredDy) * 0.15;

    let nx = Math.max(-1, Math.min(1, filteredDx / 5));
    let ny = Math.max(-1, Math.min(1, filteredDy / 5));

    motionActive = true;

    setGradientByPercent((nx + 1) * 50, (1 - (ny + 1) / 2) * 100);
  });
}

attachMotion();

/* ============================================================
   CENTERED EVEN HOLE GRID
============================================================ */

function drawMask() {
  const canvas = document.getElementById("mask");
  const ctx = canvas.getContext("2d");
  canvas.width = innerWidth;
  canvas.height = innerHeight;

  ctx.fillStyle = "#000";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  const spacing = 16;
  const radius  = 3.5;

  const cols = Math.ceil(canvas.width  / spacing);
  const rows = Math.ceil(canvas.height / spacing);

  const leftoverX = canvas.width  - cols * spacing;
  const leftoverY = canvas.height - rows * spacing;

  const offsetX = leftoverX / 2;
  const offsetY = leftoverY / 2;

  ctx.globalCompositeOperation = "destination-out";

  for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {

      const hx = offsetX + c * spacing + spacing / 2;
      const hy = offsetY + r * spacing + spacing / 2;

      ctx.beginPath();
      ctx.arc(hx, hy, radius, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  ctx.globalCompositeOperation = "source-over";
}

drawMask();
window.addEventListener("resize", drawMask);

/* extra safety: redraw when tab becomes visible or page is shown again */
document.addEventListener("visibilitychange", () => {
  if (!document.hidden) {
    // small timeout lets the browser settle new viewport height
    setTimeout(drawMask, 50);
  }
});

window.addEventListener("pageshow", () => {
  setTimeout(drawMask, 50);
});

window.addEventListener("orientationchange", () => {
  setTimeout(drawMask, 200);
});
</script>

</body>
</html>